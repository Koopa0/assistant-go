# CLI 增強功能文檔

本文檔描述了 Assistant CLI 的最新增強功能，旨在提供更好的用戶體驗和工作流程引導。

**更新日期**: 2025-01-06  
**版本**: v0.2.0

## 🎯 新增功能概覽

### 1. 互動式任務選單
- **命令**: `menu`
- **功能**: 提供結構化的任務選擇介面
- **優點**: 引導用戶完成複雜任務，減少學習曲線

### 2. 工作流程指南
- **命令**: `workflow` 或 `guide`
- **功能**: 顯示常見任務的逐步指南
- **優點**: 幫助新用戶快速上手

### 3. 快捷命令
新增多個快捷命令，直接訪問常用功能：
- `analyze` - 代碼品質分析
- `test` - 生成單元測試
- `refactor` - 重構建議
- `optimize` - 性能優化
- `sql` - SQL 優化
- `docker` - Dockerfile 分析

### 4. 上下文保持改進
- 對話歷史從 10 條增加到 20 條
- 更好的上下文感知和記憶

## 📚 使用指南

### 互動式選單使用

```bash
assistant> menu

選擇您要執行的任務類型
────────────────────────────────────────────────────────────
  [1] 💻 開發輔助 - 代碼分析、重構建議、測試生成
  [2] 🗄️ 資料庫操作 - SQL 優化、架構分析、遷移生成
  [3] 🐳 DevOps 工具 - Docker、Kubernetes、CI/CD
  [4] 📊 專案分析 - 工作區掃描、依賴分析、架構審查
  [5] 🤖 LangChain 功能 - 智能代理、記憶系統、RAG
  [6] 💬 自由對話 - 開放式問答和討論
  [0] 返回主選單

請選擇: 1
```

### 工作流程範例

#### 代碼審查工作流程
```bash
assistant> workflow

🚀 快速開始工作流程
  1. 使用 'status' 檢查系統狀態
  2. 使用 'tools' 查看可用工具
  3. 選擇合適的任務類型開始工作
  4. 跟隨引導完成任務

🔍 代碼審查工作流程
  1. 選擇 '開發輔助' > '分析當前專案代碼品質'
  2. 系統會掃描專案並生成報告
  3. 根據報告選擇 '重構建議' 獲取改進方案
  4. 使用 '生成單元測試' 提高測試覆蓋率
```

### 快捷命令範例

```bash
# 快速分析代碼品質
assistant> analyze
開始分析專案代碼品質...
分析目錄: .
正在分析代碼...
✅ 代碼品質分析完成
[分析結果...]

# 生成測試
assistant> test
請輸入要生成測試的檔案路徑: internal/assistant/processor.go
正在生成測試代碼...
✅ 測試代碼生成完成
[測試代碼...]

# SQL 優化
assistant> sql
請輸入要優化的 SQL 查詢（輸入 'done' 結束）:
SELECT * FROM users WHERE created_at > NOW() - INTERVAL '7 days'
done
正在優化查詢...
✅ SQL 優化完成
[優化建議...]
```

## 🔧 技術改進

### 1. 模組化設計
- `enhanced_features.go` - 選單和工作流程系統
- `handlers.go` - 具體功能處理器
- 清晰的責任分離

### 2. 用戶體驗優化
- 視覺化的選單系統
- 進度指示器
- 彩色輸出和圖標
- 清晰的錯誤提示

### 3. 擴展性設計
- 易於添加新的任務類型
- 可配置的工作流程
- 插件化的處理器架構

## 🚀 未來計劃

### 短期目標（1-2 週）
1. **持久化會話**
   - 保存和恢復對話狀態
   - 跨會話的上下文保持

2. **批量操作**
   - 批量文件分析
   - 批量測試生成
   - 批量重構建議

3. **模板系統**
   - 自定義提示模板
   - 任務模板
   - 輸出格式模板

### 中期目標（1-2 月）
1. **智能建議**
   - 基於使用歷史的任務推薦
   - 智能命令補全
   - 上下文感知的建議

2. **協作功能**
   - 共享工作流程
   - 團隊知識庫
   - 代碼審查整合

3. **性能優化**
   - 響應時間優化
   - 記憶體使用優化
   - 並行處理支持

## 💡 使用建議

### 最佳實踐
1. **使用選單導航**：對於複雜任務，使用 `menu` 命令獲得引導
2. **利用快捷命令**：熟悉快捷命令可以大幅提高效率
3. **查看工作流程**：不確定如何開始時，使用 `workflow` 命令
4. **保持對話連貫**：在一個會話中完成相關任務，以保持上下文

### 常見問題

**Q: 如何返回主選單？**
A: 在任何子選單中選擇 "0" 或輸入 "menu" 命令

**Q: 如何取消正在進行的操作？**
A: 使用 Ctrl+C 中斷，系統會詢問是否退出

**Q: 選單選項可以自定義嗎？**
A: 目前不支持，但這是計劃中的功能

## 🐛 已知問題

1. **LangChain 功能**：部分 LangChain 功能仍在開發中
2. **文件保存**：生成的代碼/測試目前需要手動保存
3. **K8s 支持**：Kubernetes 功能尚未完全實現

## 📝 反饋和貢獻

如果您有任何建議或發現問題，請通過以下方式聯繫：
- GitHub Issues: [提交問題](https://github.com/koopa0/assistant-go/issues)
- 功能請求：在 Issue 中使用 "enhancement" 標籤

---

**維護者**: Assistant 開發團隊  
**授權**: MIT License